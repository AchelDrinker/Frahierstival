@use 'sass:map';
@use 'sass:string';
@use 'sass:list';
@use 'sass:math';
@use 'sass:meta';

/// Removes a specific item from a list.
/// @author Hugo Giraudel
/// @param {list} $list List.
/// @param {integer} $index Index.
/// @return {list} Updated list.
@function remove-nth($list, $index) {

    $result: null;

    @if meta.type-of($index) != number {
        @warn "$index: #{string.quote($index)} is not a number for `remove-nth`.";
    }
    @else if $index == 0 {
        @warn "List index 0 must be a non-zero integer for `remove-nth`.";
    }
    @else if math.abs($index) > list.length($list) {
        @warn "List index is #{$index} but list is only #{list.length($list)} item long for `remove-nth`.";
    }
    @else {

        $result: ();
        @if $index < 0 {
            $index: list.length($list) + $index + 1;
        }

        @for $i from 1 through list.length($list) {

            @if $i != $index {
                $result: list.append($result, list.nth($list, $i));
            }

        }

    }

    @return $result;

}

/// Replaces a substring within another string.
/// @author Hugo Giraudel
/// @param {string} $string String.
/// @param {string} $search Substring.
/// @param {string} $replace Replacement.
/// @return {string} Updated string.
@function str-replace($string, $search, $replace: '') {

    $index: string.index($string, $search);

    @if $index {
        @return string.slice($string, 1, $index - 1) + $replace + str-replace(string.slice($string, $index + string.length($search)), $search, $replace);
    }

    @return $string;

}

/// Replaces a substring within each string in a list.
/// @param {list} $strings List of strings.
/// @param {string} $search Substring.
/// @param {string} $replace Replacement.
/// @return {list} Updated list of strings.
@function str-replace-all($strings, $search, $replace: '') {

    @each $string in $strings {
        $strings: list.set-nth($strings, list.index($strings, $string), str-replace($string, $search, $replace));
    }

    @return $strings;

}

/// Gets a value from a map.
/// @author Hugo Giraudel
/// @param {map} $map Map.
/// @param {string} $keys Key(s).
/// @return {string} Value.
@function val($map, $keys...) {

    @if list.nth($keys, 1) == null {
        $keys: remove-nth($keys, 1);
    }

    @each $key in $keys {
        $map: map.get($map, $key);
    }

    @return $map;

}
